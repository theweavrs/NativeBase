{"version":3,"sources":["../../../src/basic/DeckSwiper.js"],"names":["SWIPE_THRESHOLD","DeckSwiper","props","state","pan","Animated","ValueXY","pan2","enter","Value","selectedItem","dataSource","selectedItem2","card1Top","card2Top","fadeAnim","looping","disabled","length","lastCard","setState","undefined","visibleIndex","indexOf","currentIndex","nextIndex","topCard","position","top","right","left","newIdx","newIdx2","setTimeout","nextIndexes","findNextIndexes","onSwiping","timing","toValue","start","spring","friction","selectNext","decay","velocity","x","y","deceleration","_resetState","bind","_panResponder","PanResponder","create","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","evt","gestureState","Math","abs","dx","onPanResponderGrant","e","setOffset","_value","setValue","onPanResponderMove","val","opa","event","onPanResponderRelease","vx","vy","onSwipeRight","onSwipeLeft","translateX","translateY","rotate","interpolate","inputRange","outputRange","opacity","scale","animatedCardStyles","transform","animatedCardStyles2","flexDirection","renderEmpty","getCardStyles","getInitialStyle","panHandlers","renderItem","renderBottom","renderTop","Component","propTypes","ViewPropTypes","style","PropTypes","oneOfType","object","number","array","StyledDeckSwiper","mapPropsToStyleNames"],"mappings":"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","file":"DeckSwiper.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { View, Animated, PanResponder, ViewPropTypes } from \"react-native\";\r\nimport clamp from \"clamp\";\r\nimport { connectStyle } from \"native-base-shoutem-theme\";\r\nimport mapPropsToStyleNames from \"../utils/mapPropsToStyleNames\";\r\n\r\nconst SWIPE_THRESHOLD = 120;\r\n\r\nclass DeckSwiper extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pan: new Animated.ValueXY(),\r\n      pan2: new Animated.ValueXY(),\r\n      enter: new Animated.Value(0.8),\r\n      selectedItem: this.props.dataSource[0],\r\n      selectedItem2: this.props.dataSource[1],\r\n      card1Top: true,\r\n      card2Top: false,\r\n      fadeAnim: new Animated.Value(0.8),\r\n      looping:\r\n        typeof this.props.looping === \"undefined\" ? true : this.props.looping,\r\n      disabled: this.props.dataSource.length === 0,\r\n      lastCard: this.props.dataSource.length === 1\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps({ dataSource }) {\r\n    if (dataSource.length !== this.props.dataSource.length) {\r\n      if (dataSource.length <= 1) {\r\n        this.setState({\r\n          ...this.state,\r\n          selectedItem: dataSource[0],\r\n          selectedItem2: undefined,\r\n          disabled: dataSource.length === 0,\r\n          lastCard: dataSource.length === 1\r\n        });\r\n        return;\r\n      }\r\n\r\n      const visibleIndex = dataSource.indexOf(this.state.selectedItem);\r\n      const currentIndex = visibleIndex < 0 ? visibleIndex + 1 : visibleIndex;\r\n      const nextIndex =\r\n        currentIndex + 1 === dataSource.length ? 0 : currentIndex + 1;\r\n\r\n      this.setState({\r\n        selectedItem: dataSource[currentIndex],\r\n        selectedItem2: dataSource[nextIndex]\r\n      });\r\n    }\r\n  }\r\n\r\n  getInitialStyle() {\r\n    return {\r\n      topCard: {\r\n        position: \"absolute\",\r\n        top: 0,\r\n        right: 0,\r\n        left: 0\r\n      }\r\n    };\r\n  }\r\n\r\n  findNextIndexes(currentIndex) {\r\n    const newIdx = currentIndex + 1;\r\n    const newIdx2 = currentIndex + 2;\r\n\r\n    if (\r\n      newIdx2 > this.props.dataSource.length - 1 &&\r\n      newIdx === this.props.dataSource.length - 1\r\n    ) {\r\n      return [newIdx, 0];\r\n    } else if (newIdx > this.props.dataSource.length - 1) {\r\n      return [0, 1];\r\n    }\r\n    return [newIdx, newIdx2];\r\n  }\r\n\r\n  selectNext() {\r\n    const dataSource = this.props.dataSource;\r\n    const currentIndex = dataSource.indexOf(this.state.selectedItem);\r\n\r\n    // if not looping, check for these conditionals and if true return from selectNext()\r\n    if (!this.state.looping) {\r\n      // reached end -> only display static renderEmpty() -> no swiping\r\n      if (currentIndex === dataSource.length - 1) {\r\n        return this.setState({\r\n          disabled: true\r\n        });\r\n      } else if (currentIndex === dataSource.length - 2) {\r\n        // show last card with renderEmpty() component behind it\r\n        return setTimeout(() => {\r\n          this.setState({\r\n            selectedItem: dataSource[currentIndex + 1]\r\n          });\r\n          setTimeout(() => {\r\n            this.setState({\r\n              lastCard: true\r\n            });\r\n          }, 350);\r\n        }, 50);\r\n      }\r\n    }\r\n\r\n    const nextIndexes = this.findNextIndexes(currentIndex);\r\n    setTimeout(() => {\r\n      this.setState({\r\n        selectedItem: this.props.dataSource[nextIndexes[0]]\r\n      });\r\n      setTimeout(() => {\r\n        this.setState({\r\n          selectedItem2: this.props.dataSource[nextIndexes[1]]\r\n        });\r\n      }, 350);\r\n    }, 50);\r\n  }\r\n\r\n  swipeRight() {\r\n    if (this.props.onSwiping) this.props.onSwiping(\"right\");\r\n    setTimeout(() => {\r\n      Animated.timing(this.state.fadeAnim, { toValue: 1 }).start();\r\n      Animated.spring(this.state.enter, { toValue: 1, friction: 7 }).start();\r\n      this.selectNext();\r\n      Animated.decay(this.state.pan, {\r\n        velocity: { x: 8, y: 1 },\r\n        deceleration: 0.98\r\n      }).start(this._resetState.bind(this));\r\n    }, 300);\r\n  }\r\n\r\n  swipeLeft() {\r\n    if (this.props.onSwiping) this.props.onSwiping(\"left\");\r\n    setTimeout(() => {\r\n      Animated.timing(this.state.fadeAnim, { toValue: 1 }).start();\r\n      Animated.spring(this.state.enter, { toValue: 1, friction: 7 }).start();\r\n      this.selectNext();\r\n      Animated.decay(this.state.pan, {\r\n        velocity: { x: -8, y: 1 },\r\n        deceleration: 0.98\r\n      }).start(this._resetState.bind(this));\r\n    }, 300);\r\n  }\r\n\r\n  componentWillMount() {\r\n    this._panResponder = PanResponder.create({\r\n      onMoveShouldSetResponderCapture: () => true,\r\n      onMoveShouldSetPanResponderCapture: (evt, gestureState) =>\r\n        Math.abs(gestureState.dx) > 5,\r\n\r\n      onPanResponderGrant: (e, gestureState) => {\r\n        this.state.pan.setOffset({\r\n          x: this.state.pan.x._value,\r\n          y: this.state.pan.y._value\r\n        });\r\n        this.state.pan.setValue({ x: 0, y: 0 });\r\n      },\r\n\r\n      onPanResponderMove: (e, gestureState) => {\r\n        if (gestureState.dx > 20) {\r\n          if (this.props.onSwiping)\r\n            this.props.onSwiping(\"right\", gestureState.dx);\r\n        } else if (gestureState.dx < -20) {\r\n          if (this.props.onSwiping)\r\n            this.props.onSwiping(\"left\", gestureState.dx);\r\n        }\r\n        let val = Math.abs(gestureState.dx * 0.0013);\r\n        const opa = Math.abs(gestureState.dx * 0.0022);\r\n        if (val > 0.2) {\r\n          val = 0.2;\r\n        }\r\n        Animated.timing(this.state.fadeAnim, { toValue: 0.8 + val }).start();\r\n        Animated.spring(this.state.enter, {\r\n          toValue: 0.8 + val,\r\n          friction: 7\r\n        }).start();\r\n        Animated.event([null, { dx: this.state.pan.x }])(e, gestureState);\r\n      },\r\n\r\n      onPanResponderRelease: (e, { vx, vy }) => {\r\n        if (this.props.onSwiping) this.props.onSwiping(null);\r\n        let velocity;\r\n\r\n        if (vx >= 0) {\r\n          velocity = clamp(vx, 4.5, 10);\r\n        } else if (vx < 0) {\r\n          velocity = clamp(vx * -1, 4.5, 10) * -1;\r\n        }\r\n\r\n        if (Math.abs(this.state.pan.x._value) > SWIPE_THRESHOLD) {\r\n          if (velocity > 0) {\r\n            this.props.onSwipeRight\r\n              ? this.props.onSwipeRight(this.state.selectedItem)\r\n              : undefined;\r\n            this.selectNext();\r\n          } else {\r\n            this.props.onSwipeLeft\r\n              ? this.props.onSwipeLeft(this.state.selectedItem)\r\n              : undefined;\r\n            this.selectNext();\r\n          }\r\n\r\n          Animated.decay(this.state.pan, {\r\n            velocity: { x: velocity, y: vy },\r\n            deceleration: 0.98\r\n          }).start(this._resetState.bind(this));\r\n        } else {\r\n          Animated.spring(this.state.pan, {\r\n            toValue: { x: 0, y: 0 },\r\n            friction: 4\r\n          }).start();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  _resetState() {\r\n    this.state.pan.setValue({ x: 0, y: 0 });\r\n    this.state.enter.setValue(0.8);\r\n    this.state.fadeAnim.setValue(0.8);\r\n    this.setState({\r\n      card1Top: !this.state.card1Top,\r\n      card2Top: !this.state.card2Top\r\n    });\r\n    if (this.props.onSwiping) this.props.onSwiping(null);\r\n  }\r\n\r\n  getCardStyles() {\r\n    const { pan, pan2, enter } = this.state;\r\n\r\n    const [translateX, translateY] = [pan.x, pan.y];\r\n    // let [translateX, translateY] = [pan2.x, pan2.y];\r\n\r\n    const rotate = pan.x.interpolate({\r\n      inputRange: [-700, 0, 700],\r\n      outputRange: [\"-10deg\", \"0deg\", \"10deg\"]\r\n    });\r\n\r\n    const opacity = pan.x.interpolate({\r\n      inputRange: [-320, 0, 320],\r\n      outputRange: [0.9, 1, 0.9]\r\n    });\r\n    const scale = enter;\r\n\r\n    const animatedCardStyles = {\r\n      transform: [{ translateX }, { translateY }, { rotate }],\r\n      opacity\r\n    };\r\n    const animatedCardStyles2 = { transform: [{ scale }] };\r\n\r\n    return [animatedCardStyles, animatedCardStyles2];\r\n  }\r\n\r\n  render() {\r\n    if (this.state.disabled) {\r\n      // disable swiping and renderEmpty\r\n      return (\r\n        <View style={{ position: \"relative\", flexDirection: \"column\" }}>\r\n          {<View>{this.props.renderEmpty && this.props.renderEmpty()}</View>}\r\n        </View>\r\n      );\r\n    } else if (this.state.lastCard) {\r\n      // display renderEmpty underneath last viable card\r\n      return (\r\n        <View style={{ position: \"relative\", flexDirection: \"column\" }}>\r\n          {this.state.selectedItem === undefined ? (\r\n            <View />\r\n          ) : (\r\n            <View>\r\n              <Animated.View\r\n                style={[\r\n                  this.getCardStyles()[1],\r\n                  this.getInitialStyle().topCard,\r\n                  { opacity: this.state.fadeAnim }\r\n                ]}\r\n                {...this._panResponder.panHandlers}\r\n              >\r\n                {this.props.renderEmpty && this.props.renderEmpty()}\r\n              </Animated.View>\r\n              <Animated.View\r\n                style={[\r\n                  this.getCardStyles()[0],\r\n                  this.getInitialStyle().topCard\r\n                ]}\r\n                {...this._panResponder.panHandlers}\r\n              >\r\n                {this.props.renderItem(this.state.selectedItem)}\r\n              </Animated.View>\r\n            </View>\r\n          )}\r\n        </View>\r\n      );\r\n    }\r\n    return (\r\n      <View style={{ position: \"relative\", flexDirection: \"column\" }}>\r\n        {this.state.selectedItem === undefined ? (\r\n          <View />\r\n        ) : (\r\n          <View>\r\n            <Animated.View\r\n              style={[\r\n                this.getCardStyles()[1],\r\n                this.getInitialStyle().topCard,\r\n                { opacity: this.state.fadeAnim }\r\n              ]}\r\n              {...this._panResponder.panHandlers}\r\n            >\r\n              {this.props.renderBottom\r\n                ? this.props.renderBottom(this.state.selectedItem2)\r\n                : this.props.renderItem(this.state.selectedItem2)}\r\n            </Animated.View>\r\n            <Animated.View\r\n              style={[this.getCardStyles()[0], this.getInitialStyle().topCard]}\r\n              {...this._panResponder.panHandlers}\r\n            >\r\n              {this.props.renderTop\r\n                ? this.props.renderTop(this.state.selectedItem)\r\n                : this.props.renderItem(this.state.selectedItem)}\r\n            </Animated.View>\r\n          </View>\r\n        )}\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nDeckSwiper.propTypes = {\r\n  ...ViewPropTypes,\r\n  style: PropTypes.oneOfType([\r\n    PropTypes.object,\r\n    PropTypes.number,\r\n    PropTypes.array\r\n  ]),\r\n  dataSource: PropTypes.array\r\n};\r\n\r\nconst StyledDeckSwiper = connectStyle(\r\n  \"NativeBase.DeckSwiper\",\r\n  {},\r\n  mapPropsToStyleNames\r\n)(DeckSwiper);\r\n\r\nexport { StyledDeckSwiper as DeckSwiper };\r\n"]}