{"version":3,"sources":["../../../src/basic/ToastContainer.js"],"names":["ToastContainer","props","state","modalVisible","fadeAnim","Animated","Value","position","opacity","width","elevation","paddingHorizontal","Platform","OS","top","getTop","undefined","bottom","buttonText","trim","length","config","setState","text","getButtonText","type","supportedOrientations","style","buttonTextStyle","buttonStyle","textStyle","onClose","closeTimeout","clearTimeout","duration","setTimeout","closeToast","bind","timing","toValue","start","reason","closeModal","getToastStyle","toastInstance","_root","showToast","getModalState","Component","propTypes","ViewPropTypes","PropTypes","oneOfType","object","number","array","StyledToastContainer","mapPropsToStyleNames"],"mappings":"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","file":"ToastContainer.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { View, Modal, Platform, Animated, ViewPropTypes } from \"react-native\";\r\nimport { connectStyle } from \"native-base-shoutem-theme\";\r\nimport { Text } from \"./Text\";\r\nimport { Button } from \"./Button\";\r\nimport { ViewNB } from \"./View\";\r\nimport { Toast } from \"./Toast\";\r\nimport mapPropsToStyleNames from \"../utils/mapPropsToStyleNames\";\r\n\r\nclass ToastContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modalVisible: false,\r\n      fadeAnim: new Animated.Value(0)\r\n    };\r\n  }\r\n  static toastInstance;\r\n  static show({ ...config }) {\r\n    this.toastInstance._root.showToast({ config });\r\n  }\r\n  static hide() {\r\n    if (this.toastInstance._root.getModalState()) {\r\n      this.toastInstance._root.closeToast(\"functionCall\");\r\n    }\r\n  }\r\n  getToastStyle() {\r\n    return {\r\n      position: \"absolute\",\r\n      opacity: this.state.fadeAnim,\r\n      width: \"100%\",\r\n      elevation: 9,\r\n      paddingHorizontal: Platform.OS === \"ios\" ? 20 : 0,\r\n      top: this.state.position === \"top\" ? this.getTop() : undefined,\r\n      bottom: this.state.position === \"bottom\" ? this.getTop() : undefined\r\n    };\r\n  }\r\n  getTop() {\r\n    if (Platform.OS === \"ios\") {\r\n      return 30;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n  getButtonText(buttonText) {\r\n    if (buttonText) {\r\n      if (buttonText.trim().length === 0) {\r\n        return undefined;\r\n      } else return buttonText;\r\n    }\r\n    return undefined;\r\n  }\r\n  getModalState() {\r\n    return this.state.modalVisible;\r\n  }\r\n  showToast({ config }) {\r\n    this.setState({\r\n      modalVisible: true,\r\n      text: config.text,\r\n      buttonText: this.getButtonText(config.buttonText),\r\n      type: config.type,\r\n      position: config.position ? config.position : \"bottom\",\r\n      supportedOrientations: config.supportedOrientations,\r\n      style: config.style,\r\n      buttonTextStyle: config.buttonTextStyle,\r\n      buttonStyle: config.buttonStyle,\r\n      textStyle: config.textStyle,\r\n      onClose: config.onClose\r\n    });\r\n    // If we have a toast already open, cut off its close timeout so that it won't affect *this* toast.\r\n    if (this.closeTimeout) {\r\n      clearTimeout(this.closeTimeout)\r\n    }\r\n    // Set the toast to close after the duration.\r\n    if (config.duration !== 0) {\r\n      const duration = (config.duration > 0) ? config.duration : 1500;\r\n      this.closeTimeout = setTimeout(this.closeToast.bind(this, 'timeout'), duration);\r\n    }\r\n    // Fade the toast in now.\r\n    Animated.timing(this.state.fadeAnim, {\r\n      toValue: 1,\r\n      duration: 200\r\n    }).start();\r\n  }\r\n  closeModal(reason) {\r\n    this.setState({\r\n      modalVisible: false\r\n    });\r\n    const { onClose } = this.state;\r\n    if (onClose && typeof onClose === \"function\") {\r\n      onClose(reason);\r\n    }\r\n  }\r\n  closeToast(reason) {\r\n    clearTimeout(this.closeTimeout);\r\n    Animated.timing(this.state.fadeAnim, {\r\n      toValue: 0,\r\n      duration: 200\r\n    }).start(this.closeModal.bind(this, reason));\r\n  }\r\n  render() {\r\n    if (this.state.modalVisible) {\r\n      return (\r\n        <Animated.View style={this.getToastStyle()}>\r\n          <Toast\r\n            style={this.state.style}\r\n            danger={this.state.type == \"danger\" ? true : false}\r\n            success={this.state.type == \"success\" ? true : false}\r\n            warning={this.state.type == \"warning\" ? true : false}\r\n          >\r\n            <Text style={this.state.textStyle}>{this.state.text}</Text>\r\n            {this.state.buttonText && (\r\n              <Button\r\n                style={this.state.buttonStyle}\r\n                onPress={() => this.closeToast('user')}\r\n              >\r\n                <Text style={this.state.buttonTextStyle}>\r\n                  {this.state.buttonText}\r\n                </Text>\r\n              </Button>\r\n            )}\r\n          </Toast>\r\n        </Animated.View>\r\n      );\r\n    } else return null;\r\n  }\r\n}\r\n\r\nToastContainer.propTypes = {\r\n  ...ViewPropTypes,\r\n  style: PropTypes.oneOfType([\r\n    PropTypes.object,\r\n    PropTypes.number,\r\n    PropTypes.array\r\n  ])\r\n};\r\n\r\nconst StyledToastContainer = connectStyle(\r\n  \"NativeBase.ToastContainer\",\r\n  {},\r\n  mapPropsToStyleNames\r\n)(ToastContainer);\r\n\r\nexport { StyledToastContainer as ToastContainer };\r\n"]}